var THREEx=THREEx||{};THREEx.KeyboardState=function(){this.keyCodes={},this.modifiers={};var e=this;this._onKeyDown=function(t){e._onKeyChange(t,!0)},this._onKeyUp=function(t){e._onKeyChange(t,!1)},document.addEventListener("keydown",this._onKeyDown,!1),document.addEventListener("keyup",this._onKeyUp,!1)},THREEx.KeyboardState.prototype.destroy=function(){document.removeEventListener("keydown",this._onKeyDown,!1),document.removeEventListener("keyup",this._onKeyUp,!1)},THREEx.KeyboardState.MODIFIERS=["shift","ctrl","alt","meta"],THREEx.KeyboardState.ALIAS={left:37,up:38,right:39,down:40,space:32,pageup:33,pagedown:34,tab:9},THREEx.KeyboardState.prototype._onKeyChange=function(e,t){var o=e.keyCode;this.keyCodes[o]=t,this.modifiers.shift=e.shiftKey,this.modifiers.ctrl=e.ctrlKey,this.modifiers.alt=e.altKey,this.modifiers.meta=e.metaKey},THREEx.KeyboardState.prototype.pressed=function(e){for(var t=e.split("+"),o=0;o<t.length;o++){var n,i=t[o];if(n=-1!==THREEx.KeyboardState.MODIFIERS.indexOf(i)?this.modifiers[i]:-1!=Object.keys(THREEx.KeyboardState.ALIAS).indexOf(i)?this.keyCodes[THREEx.KeyboardState.ALIAS[i]]:this.keyCodes[i.toUpperCase().charCodeAt(0)],!n)return!1}return!0};